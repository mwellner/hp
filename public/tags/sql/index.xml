<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sql on mathias wellner</title>
    <link>http://www.mwellner.de/tags/sql/index.xml</link>
    <description>Recent content in Sql on mathias wellner</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>de-de</language>
    <atom:link href="http://www.mwellner.de/tags/sql/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Ein Jahr Industrie &amp;ndash; ein Rückblick</title>
      <link>http://www.mwellner.de/post/2010-10-26-ein-jahr-industrie-ein-ruckblick/</link>
      <pubDate>Tue, 26 Oct 2010 22:36:20 +0000</pubDate>
      
      <guid>http://www.mwellner.de/post/2010-10-26-ein-jahr-industrie-ein-ruckblick/</guid>
      <description>&lt;p&gt;Vor ziemlich genau einem Jahr begann ich bei der &lt;a href=&#34;http://www.helveting.ch&#34;&gt;Helveting AG&lt;/a&gt;, einem aufstrebenden Schweizer Ingenieurbüro. Mit dem Doktortitel in der Tasche, nach drei Wochen Arbeitslosigkeit und mitten in einem JobBasis-Kurs der &lt;a href=&#34;http://www.newplacement.ch&#34;&gt;NewPlacement GmbH&lt;/a&gt; wagte ich den Sprung ins &lt;em&gt;richtige&lt;/em&gt; Berufsleben. Und da bin ich nun und reflektiere.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Ein Jahr &amp;ndash; drei Projekte&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Zuallererst erwartete mich der Sprung ins kalte Wasser eines ambitionierten Großprojekts, es ging um die Neuentwicklung eines medizinischen Geräts. Ich war als Teilprojektleiter von Anfang an stark gefordert. Nach der Konzeptphase verschob sich mein Schwerpunkt auf ein internes Projekt, ich entwickelte in Rekordzeit ein System für die Zeiterfassung mit &lt;a href=&#34;http://cakephp.org/&#34;&gt;cakePHP&lt;/a&gt; und &lt;a href=&#34;http://www.postgresql.org/&#34;&gt;PostgreSQL&lt;/a&gt;, welches die existierende Lösung mit Excel-Sheets ablöste.&lt;/p&gt;

&lt;p&gt;Danach gab es noch ein zweimonatiges Kundenprojekt mit einer Smart-Phone-Applikation, so dass ich schon an drei sehr unterschiedlichen Projekten mitgewirkt habe. Ab November erwartet mich ein viertes Projekt, diesmal im Bereich Software-Tests und direkt beim Kunden. Somit hat mich jetzt auch das Pendelschicksal erwischt, mit einem 1. Klasse-Generalabonnement, WLAN im Zug und der Möglichkeit unterwegs zu arbeiten lässt sich das aber sicherlich ertragen. Dennoch bedeutet es eine Umstellung, an die ich mich erst noch gewöhnen muss.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Forschung vs. Industrie&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Was sind nun die Unterschiede zwischen Forschung und Industrie? Neu sind die Zeiterfassung und der Druck, in der geplanten Zeit ein Resultat zu erreichen, mit dem der Kunde zufrieden ist. Da ich aber lange Zeit an einem internen Projekt gearbeitet habe, traf das für mich nur zum Teil zu. Obwohl ich auch dort unter großem Druck stand, zum Stichtag musste das Basissystem mit firmenkritischen Daten stehen und funktionieren. Das grundsätzliche Problem bei Projekten für jemand anderen sind wechselnde Anforderungen. Und gerade beim Zeiterfassungs-System, mit dem alle arbeiten, kommen wöchentlich neue Anforderungen und Verbesserungsvorschläge, so dass die großen Entwicklungsprojekte schnell mal aufgeschoben werden. In der Forschung war das anders, dort konnte ich weitestgehend selbst bestimmen, was ich mache und wann es gut genug ist, natürlich immer im Dialog mit den Teamkollegen und meinem Doktorvater.&lt;/p&gt;

&lt;p&gt;Der Alltag ist sehr ähnlich. Nach dem etwas längeren Arbeitsweg treffe ich in einer Büroumgebung mit vielen am Computer tippenden und klickenden Leuten ein. Ich starte meine persönliche Kiste hoch, checke Emails und arbeite weitestgehend selbstständig an meinen Projekten. Mittagspause, Besprechungen mit Kollegen und Vorgesetzten, Präsentationen, Fahrten zum Kunden, Konferenzteilnahmen fehlen zugegebenermaßen &amp;ndash; im Grunde sehr ähnliche Abläufe.&lt;/p&gt;

&lt;p&gt;Und das Lösen von Programmierproblemen ist auch gleich geblieben, ob nun mit &lt;a href=&#34;http://www.mathworks.ch/&#34;&gt;Matlab&lt;/a&gt;, &lt;a href=&#34;http://de.wikipedia.org/wiki/C%2B%2B&#34;&gt;C++&lt;/a&gt; oder &lt;a href=&#34;http://de.wikipedia.org/wiki/Php&#34;&gt;PHP&lt;/a&gt;, stets stoße ich irgendwo an, analysiere, konsultiere das Internet, grenze ein und löse das Problem, um auf das nächste zu treffen. Was mir ein bisschen fehlt, ist der hohe Anspruch, den wissenschaftliche Publikationen an das Formulieren und Layout von Dokumenten stellen. Dafür fehlt schlicht die Zeit, obwohl der Abschlussbericht oder das Konzept ebenfalls sehr wichtige Dokumente sind, für die der Kunde eine Menge Geld bezahlt. Aber für einen guten Bericht müsste man schon mehrere Tage im Angebot rechnen.&lt;/p&gt;

&lt;p&gt;Inhaltlich habe ich einiges an Entwicklungsmethodik gelernt, &lt;a href=&#34;http://www.android.com/&#34;&gt;Android&lt;/a&gt; und &lt;a href=&#34;http://www.java.com/de/&#34;&gt;Java&lt;/a&gt; kennen gelernt, außerdem meine Fähigkeiten im Bereich Datenbank-Entwurf und Webdesign ausgebaut.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Freizeit&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Meine Freizeitaktivitäten konnte ich zum größten Teil beibehalten, ich nahm an bis zu drei parallelen Theaterproduktionen oder -kursen teil. Der Sport kam etwas zu kurz, aber die Nähe zur Schlierener Kletterhalle konnte ich auch gut nutzen, so dass momentan Klettern mein Ausgleichssport ist.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Fazit&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Alles in allem bin ich zufrieden, ich wollte mich in verschiedenen Projekten in der Industrie ausprobieren und Erfahrung sammeln, die wichtigste Währung auf dem Arbeitsmarkt und das größte Manko eines frischgebackenen ETH-Absolventen. Von daher werde ich noch einige Zeit dabei bleiben und regelmäßig neu überlegen, ob und wann ich zurück in die deutsche Heimat möchte.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Creating a participant database</title>
      <link>http://www.mwellner.de/post/2009-04-24-creating-a-participant-database/</link>
      <pubDate>Fri, 24 Apr 2009 18:00:26 +0000</pubDate>
      
      <guid>http://www.mwellner.de/post/2009-04-24-creating-a-participant-database/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Problem&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The initial intention was to keep track of those people who have participated in one of our rowing studies. The second goal was to keep track of how our raw data is organised. Therefore, I designed a relational database with MS Access. In this article I will focus on general database design issues and how to access the database with Matlab. You could use any other &lt;a href=&#34;http://en.wikipedia.org/wiki/Relational_database_management_system&#34;&gt;relational database management system&lt;/a&gt;, which is compatible to the &lt;a href=&#34;http://en.wikipedia.org/wiki/SQL&#34;&gt;SQL standard&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A nice side-effect of such a database is their possible integration in Matlab. We can get the names of all participants of a certain study and analyse their data.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Database structure&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The first relation contains the &lt;em&gt;participant&lt;/em&gt; information.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ID [primary key]&lt;/li&gt;
&lt;li&gt;LastName&lt;/li&gt;
&lt;li&gt;FirstName&lt;/li&gt;
&lt;li&gt;Gender&lt;/li&gt;
&lt;li&gt;BirthDate&lt;/li&gt;
&lt;li&gt;CategoryID [foreign key]&lt;/li&gt;
&lt;li&gt;Comment&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The rowing skill of the participant should be identified in a repetible way, therefore a separate relation contains all possible skill levels.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Category&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ID [primary key]&lt;/li&gt;
&lt;li&gt;Label&lt;/li&gt;
&lt;li&gt;Description&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The next obvious relation describes our studies.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Study&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ID [primary key]&lt;/li&gt;
&lt;li&gt;Label&lt;/li&gt;
&lt;li&gt;Responsible person(s)&lt;/li&gt;
&lt;li&gt;Data folder&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We now need a connection between participants and studies, including the possibility of several runs. This is implemented with the relation &lt;em&gt;Participant takes part&lt;/em&gt;. Note that the primary key is a combination of ParticipantID, StudyID, and RunNumber to prevent double-insertion of data.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ParticipantID [primary key, foreign key]&lt;/li&gt;
&lt;li&gt;StudyID [primary key, foreign key]&lt;/li&gt;
&lt;li&gt;RunDate&lt;/li&gt;
&lt;li&gt;RunNumber [primary key]&lt;/li&gt;
&lt;li&gt;DataValid&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For our &lt;em&gt;raw variables&lt;/em&gt; (oar angles, seat position, physiological data) we also define a relation.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Id [primary key]&lt;/li&gt;
&lt;li&gt;Name&lt;/li&gt;
&lt;li&gt;Description&lt;/li&gt;
&lt;li&gt;Unit&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Our raw data comes in a huge matrix, where each row contains the recording at one specific point in time and each column one raw variable. The assignment of raw data to columns can differ for different studies.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Raw variable is in column&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;RawVariableID [primary key, foreign key]&lt;/li&gt;
&lt;li&gt;StudyID [primary key, foreign key]&lt;/li&gt;
&lt;li&gt;Column (in xPC output log)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Database access with Matlab&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We can now use the power of SQL statements to query the database for a specific participant. As a more complex example, I will demonstrate how to get all participants of one study.&lt;/p&gt;

&lt;p&gt;The following Matlab code builds an SQL query and executes it with an existing database connection (&lt;code&gt;database&lt;/code&gt; command). You need to define an ODBC connection first, see the Matlab documentation for more details on that.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;br /&amp;gt;
% define parts of SQL statement&amp;lt;br /&amp;gt;
study = &#39;&#39;&#39;Study1&#39;&#39;&#39;; % define study, add addition &#39;&#39; because of spaces&amp;lt;br /&amp;gt;
columns = &#39;LastName, FirstName&#39;; % define columns for selection&amp;lt;br /&amp;gt;
from = &#39;Participant p, TakesPart t, Study s&#39;; % define tables for selection&amp;lt;br /&amp;gt;
where = [&#39;p.ID = t.ParticipantID AND s.ID = t.StudyID AND s.Label = &#39;, study]; % define inner join conditions&amp;lt;br /&amp;gt;
order = &#39;LastName, FirstName&#39;; % define order of results&amp;lt;br /&amp;gt;
% combine parts to SQL query&amp;lt;br /&amp;gt;
query = sprintf(&#39;SELECT %s FROM %s WHERE %s ORDER BY %s&#39;, columns, from, where, order);&amp;lt;br /&amp;gt;
curs = exec(DatabaseConnection, query); % execute SQL query&amp;lt;br /&amp;gt;
curs = fetch(curs); % fetch data in same cursor structure&amp;lt;br /&amp;gt;
curs.Data&amp;lt;br /&amp;gt;
close(curs);&amp;lt;br /&amp;gt;
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The created query is:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SELECT LastName, FirstName FROM Participant p, TakesPart t, Study s WHERE p.ID = t.ParticipantID AND s.ID = t.StudyID AND s.Label = &#39;Study1&#39; ORDER BY LastName, FirstName&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Conclusion&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I showed how to design a participant database and query it with Matlab.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Handling huge amounts of raw data with Matlab</title>
      <link>http://www.mwellner.de/post/2009-04-07-handling-huge-amounts-of-raw-data-with-matlab/</link>
      <pubDate>Tue, 07 Apr 2009 12:12:41 +0000</pubDate>
      
      <guid>http://www.mwellner.de/post/2009-04-07-handling-huge-amounts-of-raw-data-with-matlab/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Problem&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The Matlab workspace is limited in size, depending on your system. We reached the workspace limit with a rowing study (10 participants, 1&amp;thinsp;kHz sampling rate, 20 variables, 10 minutes duration). Although the extracted data fits very well in the workspace, the raw data does not. Therefore, a solution is needed with fast access to specific variables. This is needed for feature extraction and later display of data.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Approach&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Three approaches were used to solve this problem,&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;using a relational database (see &lt;a href=&#34;http://www.mathworks.com/products/database/&#34;&gt;database toolbox&lt;/a&gt;),&lt;/li&gt;
&lt;li&gt;storing the raw data in one workspace with multiple variables, and&lt;/li&gt;
&lt;li&gt;storing each raw data variable in one workspace.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Each approach was implemented and the access time to retrieve one variable was the goal criterium. The sample data set had 555k entries.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Results&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The relational database system PostgreSQL was tested successfully but could not be used for large amounts of data. Already the storage of one data set took more than half an hour, and after a certain size an error occured with limited heap size. It seems that the driver implementation for Matlab does not allow big amounts of data.&lt;/p&gt;

&lt;p&gt;The implementation with the Matlab workspaces was much possible, interestingly single workspaces proved more efficient than one combined workspace (only the desired variable was loaded from the combined workspace).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;br /&amp;gt;
&amp;gt;&amp;gt; clear all&amp;lt;br /&amp;gt;
&amp;gt;&amp;gt; tic;load combined_workspace variable; toc&amp;lt;br /&amp;gt;
Elapsed time is 9.0 seconds.&amp;lt;br /&amp;gt;
&amp;gt;&amp;gt; clear all&amp;lt;br /&amp;gt;
&amp;gt;&amp;gt; tic; load variable_workspace; toc&amp;lt;br /&amp;gt;
Elapsed time is 1.1 seconds.&amp;lt;br /&amp;gt;
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Conclusions&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Using single workspaces for every variable is the fastest way of accessing huge amounts of raw data. The usage of a relational database system poses additional burdens, but it seems appropriate for smaller amounts of data (participants, block features, extracted data). The advantage over defining all these things in Matlab variables is the powerful SQL syntax for retrieving particular chunks of data. And in addition, the definition of primary keys and other conditions prevents you from inserting dublicate or faulty data in the database.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>